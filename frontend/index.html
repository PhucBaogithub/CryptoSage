<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Futures Trading Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.4.0/dist/axios.min.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1>Bitcoin Futures Trading Dashboard</h1>
                <div class="header-status">
                    <span id="status-indicator" class="status-dot"></span>
                    <span id="status-text">Connecting...</span>
                </div>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <button class="nav-btn active" data-tab="overview">Overview</button>
            <button class="nav-btn" data-tab="data">Data</button>
            <button class="nav-btn" data-tab="models">Models</button>
            <button class="nav-btn" data-tab="backtest">Backtest</button>
            <button class="nav-btn" data-tab="trading">Trading</button>
            <button class="nav-btn" data-tab="risk">Risk</button>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Tab -->
            <section id="overview" class="tab-content active">
                <div class="grid-2">
                    <div class="card">
                        <h2>Account Status</h2>
                        <div class="metric">
                            <span class="label">Balance</span>
                            <span class="value" id="balance">$100,000.00</span>
                        </div>
                        <div class="metric">
                            <span class="label">Equity</span>
                            <span class="value" id="equity">$101,500.00</span>
                        </div>
                        <div class="metric">
                            <span class="label">Unrealized P&L</span>
                            <span class="value positive" id="unrealized-pnl">+$1,500.00</span>
                        </div>
                        <div class="metric">
                            <span class="label">Margin Ratio</span>
                            <span class="value" id="margin-ratio">50%</span>
                        </div>
                    </div>

                    <div class="card">
                        <h2>System Status</h2>
                        <div class="status-list">
                            <div class="status-item">
                                <span class="status-label">Data Pipeline</span>
                                <span class="status-badge ready">Ready</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Models</span>
                                <span class="status-badge ready">Ready</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Backtesting</span>
                                <span class="status-badge ready">Ready</span>
                            </div>
                            <div class="status-item">
                                <span class="status-label">Execution</span>
                                <span class="status-badge ready">Ready</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>Equity Curve</h2>
                    <canvas id="equity-chart"></canvas>
                </div>

                <div class="card">
                    <h2>Recent Positions</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Size</th>
                                <th>Entry Price</th>
                                <th>Current Price</th>
                                <th>P&L</th>
                                <th>P&L %</th>
                            </tr>
                        </thead>
                        <tbody id="positions-table">
                            <tr>
                                <td>BTCUSDT</td>
                                <td>Long</td>
                                <td>1.5</td>
                                <td>$45,000</td>
                                <td>$46,000</td>
                                <td>$1,500</td>
                                <td class="positive">+2.17%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Data Tab -->
            <section id="data" class="tab-content">
                <div class="card">
                    <h2>Data Collection</h2>
                    <div class="form-group">
                        <label>Symbols</label>
                        <input type="text" id="symbols-input" placeholder="BTCUSDT, ETHUSDT" value="BTCUSDT">
                    </div>
                    <div class="form-group">
                        <label>Timeframes</label>
                        <select id="timeframes-select" multiple>
                            <option selected>1h</option>
                            <option selected>4h</option>
                            <option selected>1d</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Limit</label>
                        <input type="number" id="limit-input" value="1000">
                    </div>
                    <button class="btn btn-primary" onclick="collectData()">Start Collection</button>
                </div>

                <div class="card">
                    <h2>Data Status</h2>
                    <div class="metric">
                        <span class="label">Status</span>
                        <span class="value" id="data-status">Idle</span>
                    </div>
                    <div class="metric">
                        <span class="label">Records Collected</span>
                        <span class="value" id="records-collected">0</span>
                    </div>
                    <div class="metric">
                        <span class="label">Last Update</span>
                        <span class="value" id="last-update">-</span>
                    </div>
                </div>

                <div class="card">
                    <h2>Feature Statistics</h2>
                    <div class="metric">
                        <span class="label">Total Features</span>
                        <span class="value" id="total-features">50</span>
                    </div>
                    <div class="metric">
                        <span class="label">Price Features</span>
                        <span class="value" id="price-features">5</span>
                    </div>
                    <div class="metric">
                        <span class="label">Technical Indicators</span>
                        <span class="value" id="technical-features">15</span>
                    </div>
                    <div class="metric">
                        <span class="label">Volatility Features</span>
                        <span class="value" id="volatility-features">12</span>
                    </div>
                </div>
            </section>

            <!-- Models Tab -->
            <section id="models" class="tab-content">
                <div class="grid-2">
                    <div class="card">
                        <h2>Long-term Model</h2>
                        <div class="metric">
                            <span class="label">Status</span>
                            <span class="value" id="lt-status">Trained</span>
                        </div>
                        <div class="metric">
                            <span class="label">Accuracy</span>
                            <span class="value" id="lt-accuracy">62%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Loss</span>
                            <span class="value" id="lt-loss">0.0234</span>
                        </div>
                        <button class="btn btn-primary" onclick="trainModels()">Retrain</button>
                    </div>

                    <div class="card">
                        <h2>Short-term Model</h2>
                        <div class="metric">
                            <span class="label">Status</span>
                            <span class="value" id="st-status">Trained</span>
                        </div>
                        <div class="metric">
                            <span class="label">Accuracy</span>
                            <span class="value" id="st-accuracy">58%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Loss</span>
                            <span class="value" id="st-loss">0.0456</span>
                        </div>
                        <button class="btn btn-primary" onclick="trainModels()">Retrain</button>
                    </div>
                </div>

                <div class="card">
                    <h2>Current Predictions</h2>
                    <div class="grid-2">
                        <div>
                            <h3>Long-term (30-day)</h3>
                            <div class="metric">
                                <span class="label">Mean Return</span>
                                <span class="value positive">+1.50%</span>
                            </div>
                            <div class="metric">
                                <span class="label">Std Dev</span>
                                <span class="value">2.50%</span>
                            </div>
                            <div class="metric">
                                <span class="label">Confidence</span>
                                <span class="value">65%</span>
                            </div>
                        </div>
                        <div>
                            <h3>Short-term (1-hour)</h3>
                            <div class="metric">
                                <span class="label">Signal</span>
                                <span class="value positive">UP</span>
                            </div>
                            <div class="metric">
                                <span class="label">Probability</span>
                                <span class="value">58%</span>
                            </div>
                            <div class="metric">
                                <span class="label">Confidence</span>
                                <span class="value">62%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Backtest Tab -->
            <section id="backtest" class="tab-content">
                <div class="card">
                    <h2>Backtest Configuration</h2>
                    <div class="form-group">
                        <label>Symbol</label>
                        <input type="text" id="backtest-symbol" value="BTCUSDT">
                    </div>
                    <div class="form-group">
                        <label>Timeframe</label>
                        <select id="backtest-timeframe">
                            <option>1h</option>
                            <option selected>4h</option>
                            <option>1d</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="date" id="backtest-start">
                    </div>
                    <div class="form-group">
                        <label>End Date</label>
                        <input type="date" id="backtest-end">
                    </div>
                    <div class="form-group">
                        <label>Initial Capital</label>
                        <input type="number" id="backtest-capital" value="100000">
                    </div>
                    <button class="btn btn-primary" onclick="runBacktest()">Run Backtest</button>
                </div>

                <div class="card">
                    <h2>Backtest Results</h2>
                    <div class="grid-2">
                        <div class="metric">
                            <span class="label">Total Return</span>
                            <span class="value positive">+15.32%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Annual Return</span>
                            <span class="value positive">+45.96%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Sharpe Ratio</span>
                            <span class="value">1.45</span>
                        </div>
                        <div class="metric">
                            <span class="label">Max Drawdown</span>
                            <span class="value negative">-8.23%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Win Rate</span>
                            <span class="value">58.33%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Profit Factor</span>
                            <span class="value">1.85</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>Equity Curve</h2>
                    <canvas id="backtest-equity-chart"></canvas>
                </div>

                <div class="card">
                    <h2>Trade History</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Entry Time</th>
                                <th>Exit Time</th>
                                <th>Side</th>
                                <th>Entry Price</th>
                                <th>Exit Price</th>
                                <th>P&L</th>
                                <th>P&L %</th>
                            </tr>
                        </thead>
                        <tbody id="trades-table">
                            <tr>
                                <td>2024-10-01 10:00</td>
                                <td>2024-10-01 14:30</td>
                                <td>Long</td>
                                <td>$45,000</td>
                                <td>$45,500</td>
                                <td class="positive">$500</td>
                                <td class="positive">+1.11%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Trading Tab -->
            <section id="trading" class="tab-content">
                <div class="grid-2">
                    <div class="card">
                        <h2>Trading Mode</h2>
                        <div class="form-group">
                            <label>Mode</label>
                            <select id="trading-mode">
                                <option selected>paper</option>
                                <option>testnet</option>
                                <option>live</option>
                            </select>
                        </div>
                        <button class="btn btn-primary" onclick="startTrading()">Start Trading</button>
                        <button class="btn btn-secondary" onclick="stopTrading()">Stop Trading</button>
                    </div>

                    <div class="card">
                        <h2>Place Order</h2>
                        <div class="form-group">
                            <label>Symbol</label>
                            <input type="text" id="order-symbol" value="BTCUSDT">
                        </div>
                        <div class="form-group">
                            <label>Side</label>
                            <select id="order-side">
                                <option>long</option>
                                <option>short</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Size</label>
                            <input type="number" id="order-size" value="1.0" step="0.1">
                        </div>
                        <div class="form-group">
                            <label>Leverage</label>
                            <input type="number" id="order-leverage" value="1.0" step="0.1">
                        </div>
                        <button class="btn btn-primary" onclick="placeOrder()">Place Order</button>
                    </div>
                </div>

                <div class="card">
                    <h2>Current Positions</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Symbol</th>
                                <th>Side</th>
                                <th>Size</th>
                                <th>Entry Price</th>
                                <th>Current Price</th>
                                <th>P&L</th>
                                <th>Leverage</th>
                                <th>Liquidation Price</th>
                            </tr>
                        </thead>
                        <tbody id="current-positions">
                            <tr>
                                <td>BTCUSDT</td>
                                <td>Long</td>
                                <td>1.5</td>
                                <td>$45,000</td>
                                <td>$46,000</td>
                                <td class="positive">$1,500</td>
                                <td>3.0x</td>
                                <td>$35,250</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Risk Tab -->
            <section id="risk" class="tab-content">
                <div class="card">
                    <h2>Risk Metrics Calculator</h2>
                    <div class="form-group">
                        <label>Entry Price</label>
                        <input type="number" id="risk-entry-price" value="45000">
                    </div>
                    <div class="form-group">
                        <label>Current Price</label>
                        <input type="number" id="risk-current-price" value="46000">
                    </div>
                    <div class="form-group">
                        <label>Position Size (USD)</label>
                        <input type="number" id="risk-position-size" value="50000">
                    </div>
                    <div class="form-group">
                        <label>Leverage</label>
                        <input type="number" id="risk-leverage" value="3.0" step="0.1">
                    </div>
                    <div class="form-group">
                        <label>Funding Rate</label>
                        <input type="number" id="risk-funding-rate" value="0.0001" step="0.00001">
                    </div>
                    <button class="btn btn-primary" onclick="calculateRiskMetrics()">Calculate</button>
                </div>

                <div class="card">
                    <h2>Risk Analysis</h2>
                    <div class="grid-2">
                        <div class="metric">
                            <span class="label">Liquidation Price</span>
                            <span class="value" id="liq-price">$35,250</span>
                        </div>
                        <div class="metric">
                            <span class="label">Distance to Liquidation</span>
                            <span class="value" id="liq-distance">31.20%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Max Loss (USD)</span>
                            <span class="value negative" id="max-loss-usd">-$16,667</span>
                        </div>
                        <div class="metric">
                            <span class="label">Max Loss (%)</span>
                            <span class="value negative" id="max-loss-pct">-33.33%</span>
                        </div>
                        <div class="metric">
                            <span class="label">Hourly Funding Cost</span>
                            <span class="value" id="funding-hourly">$5.00</span>
                        </div>
                        <div class="metric">
                            <span class="label">Daily Funding Cost</span>
                            <span class="value" id="funding-daily">$120.00</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>Position Sizing Recommendations</h2>
                    <div class="metric">
                        <span class="label">Kelly Criterion</span>
                        <span class="value" id="kelly-size">$15,000</span>
                    </div>
                    <div class="metric">
                        <span class="label">Fixed Fraction (2%)</span>
                        <span class="value" id="fixed-size">$2,000</span>
                    </div>
                    <div class="metric">
                        <span class="label">Volatility-Adjusted</span>
                        <span class="value" id="vol-size">$2,500</span>
                    </div>
                    <div class="metric">
                        <span class="label">Recommended</span>
                        <span class="value" id="recommended-size">$2,000</span>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2024 Bitcoin Futures Trading System. All rights reserved.</p>
        </footer>
    </div>

    <script src="js/app.js"></script>
</body>
</html>

